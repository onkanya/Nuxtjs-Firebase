(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{336:function(e,t,r){"use strict";r.r(t);r(42);var n=r(57),l=r.n(n),o={middleware:"isLogin",layout:"default",data:function(){return{usersList:[],updateVisible:!1,updateUser:{fname:"",lname:"",age:0,phone:"",address:"",email:"",created_at:""},rules:{fname:[{required:!0,message:"Please enter first name",trigger:"blur"}],lname:[{required:!0,message:"Please enter last name",trigger:"blur"}],age:[{required:!0,message:"Please enter age",trigger:"blur"}],phone:[{required:!0,message:"Please enter phone number",trigger:"blur"}],address:[{required:!0,message:"Please enter address",trigger:"blur"}]}}},created:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.getUsersList());case 2:case"end":return e.stop()}}),null,this)},methods:{getUsersList:function(){var e,t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(l.a.firestore().collection("users").get());case 2:e=r.sent,t=[],e.forEach((function(e){t.push(e.data())})),this.usersList=t;case 6:case"end":return r.stop()}}),null,this)},reqUpdateUser:function(e){this.updateUser=this.usersList[e],this.updateVisible=!0},update:function(){var e=this;this.$refs.updateUser.validate((function(t){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=14;break}return r.prev=1,r.next=4,regeneratorRuntime.awrap(l.a.firestore().collection("users").doc(e.updateUser.email).update(e.updateUser));case 4:e.$notify.success("update success!"),e.updateVisible=!1,e.getUsersList(),r.next=14;break;case 9:r.prev=9,r.t0=r.catch(1),e.$notify.error("update failed!"),e.cancelRegister(),console.log(r.t0);case 14:case"end":return r.stop()}}),null,null,[[1,9]])}))},cancelUpdate:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateVisible=!1,this.updateUser={fname:"",lname:"",age:0,phone:"",address:"",email:"",created_at:""};case 1:case"end":return e.stop()}}),null,this)}}},d=r(23),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[e._v("User List")]),e._v(" "),r("el-table",{attrs:{data:e.usersList}},[r("el-table-column",{attrs:{prop:"created_at",label:"Register Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.$date(t.row.created_at).format("DD/MM/YYYY"))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"fname",label:"First Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"lname",label:"Last Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"age",label:"Ages"}}),e._v(" "),r("el-table-column",{attrs:{prop:"address",label:"Address"}}),e._v(" "),r("el-table-column",{attrs:{label:"Options"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{on:{click:function(r){return e.reqUpdateUser(t.$index)}}},[e._v("update")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{width:"60%",title:"Update "+e.updateUser.fname+" "+e.updateUser.lname,visible:e.updateVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0}},[r("span",[r("el-form",{ref:"updateUser",attrs:{model:e.updateUser,"status-icon":"",rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"First name",prop:"fname"}},[r("el-input",{attrs:{type:"text"},model:{value:e.updateUser.fname,callback:function(t){e.$set(e.updateUser,"fname",t)},expression:"updateUser.fname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Last name",prop:"lname"}},[r("el-input",{attrs:{type:"text"},model:{value:e.updateUser.lname,callback:function(t){e.$set(e.updateUser,"lname",t)},expression:"updateUser.lname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Age",prop:"age"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.updateUser.age,expression:"updateUser.age"}],staticClass:"el-input__inner",attrs:{type:"number"},domProps:{value:e.updateUser.age},on:{input:function(t){t.target.composing||e.$set(e.updateUser,"age",t.target.value)}}})]),e._v(" "),r("el-form-item",{attrs:{label:"Phone",prop:"phone"}},[r("el-input",{model:{value:e.updateUser.phone,callback:function(t){e.$set(e.updateUser,"phone",t)},expression:"updateUser.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Address",prop:"address"}},[r("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.updateUser.address,callback:function(t){e.$set(e.updateUser,"address",t)},expression:"updateUser.address"}})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelUpdate}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("Confirm")])],1)])],1)}),[],!1,null,null,null);t.default=component.exports}}]);